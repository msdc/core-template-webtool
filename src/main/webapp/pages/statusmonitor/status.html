<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../../css/bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="../../css/main.css" type="text/css"/>
    <script src="../../js/jQuery.js" type="text/javascript"></script>
    <script src="../../js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../../js/knockout.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../../css/simplePagination.css" type="text/css"/>
    <script src="../../js/jquery.simplePagination.js" type="text/javascript"></script>
    <script src="../../js/status.js" type="application/javascript"></script>
    <title>爬取运行监控</title>
</head>
<body>
<div class="container">

    <div class="row">
        <div class="col-md-12">
            <h3 class="text-center">爬取运行监控</h3>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div role="tabpanel">
                <!-- Nav tabs --> <!--nav nav-tabs nav-stacked-->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#seeds_effective" aria-controls="seeds_effective"
                                                              role="tab"
                                                              data-toggle="tab">种子有效性</a></li>
                    <li role="presentation"><a href="#crawl_status" aria-controls="crawl_status" role="tab"
                                               data-toggle="tab">爬取状态</a>
                    </li>
                    <li role="presentation"><a href="#crawl_data" aria-controls="crawl_data" role="tab"
                                               data-toggle="tab">爬取数据</a>
                    </li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content">

                    <!--种子有效性-->
                    <div role="tabpanel" class="tab-pane active" id="seeds_effective">
                        <div class="row addRowTopMargin" data-bind="with: seedEffectiveVM">
                            <div class="col-md-12">

                                <!--检查种子有效性按钮-->
                                <div class="row">
                                    <div class="col-md-12">
                                        <button type="button" class="btn btn-primary"
                                                data-bind="click: checkSeedsEffective">检查全部种子有效性
                                        </button>
                                    </div>
                                </div>
                                <div class="row addRowTopMargin">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-striped" id="seedEffective_table">
                                            <thead>
                                            <tr>
                                                <td>序号</td>
                                                <td>名称</td>
                                                <td>数据源地址</td>
                                                <td>有效性状态</td>
                                                <td>操作</td>
                                            </tr>
                                            </thead>
                                            <tbody data-bind="foreach: paginationUrls">
                                            <tr>
                                                <td data-bind="text: ($index()+1)"></td>
                                                <td data-bind="text: name"></td>
                                                <td data-bind="text: url" style="width: 400px;word-break: break-all"></td>
                                                <td data-bind="text: effectiveStatus, style: { color: effectiveStatus=='无效'?'red':'black'}"></td>
                                                <td>
                                                    <a role="button" class="btn btn-primary"  data-bind="attr: {href:updateUrl,target:targetWindow}">设置</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                            <tfoot>
                                            <tr>
                                                <td colspan="5">
                                                    <div id="seeds_effective_pagination"></div>
                                                </td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--爬取状态-->
                    <div role="tabpanel" class="tab-pane" id="crawl_status">
                        <div class="row addRowTopMargin" data-bind="with: crawlStatusVM">
                            <div class="col-md-12">

                                <div class="row">
                                    <div class="col-md-12">
                                        <button type="button" class="btn btn-primary">刷新爬取状态</button>
                                    </div>
                                </div>
                                <div class="row addRowTopMargin">
                                    <div class="col-md-12">
                                        <table class="table table-bordered table-striped">
                                            <thead>
                                            <tr>
                                                <td>序号</td>
                                                <td>名称</td>
                                                <td>数据源地址</td>
                                                <td>爬取状态</td>
                                                <td>操作</td>
                                            </tr>
                                            </thead>
                                            <tbody data-bind="foreach: paginationUrls">
                                            <tr>
                                                <td data-bind="text: ($index()+1)"></td>
                                                <td data-bind="text: name"></td>
                                                <td data-bind="text: url" style="width: 400px;word-break: break-all"></td>
                                                <td data-bind="text: crawlStatus"></td>
                                                <td>
                                                    <a role="button" class="btn btn-primary">停止</a>
                                                    <a role="button" class="btn btn-primary">增量重爬</a>
                                                    <a role="button" class="btn btn-primary">全量重爬</a>
                                                    <a role="button" class="btn btn-primary">重索引</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                            <tfoot>
                                            <tr>
                                                <td colspan="5">
                                                    <div id="crawl_status_pagination"></div>
                                                </td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--爬取数据-->
                    <div role="tabpanel" class="tab-pane" id="crawl_data">
                        <div class="row addRowTopMargin" data-bind="with: crawlDataVM">
                            <div class="col-md-12">

                                <div class="row">
                                    <div class="col-md-12">
                                        <button type="button" class="btn btn-primary">刷新爬取数据</button>
                                    </div>
                                </div>
                                <div class="row addRowTopMargin">
                                    <div class="col-md-12">
                                    	 <a role="button" class="btn btn-primary">按照域统计</a>
                                    	  <a role="button" class="btn btn-primary">按照分类统计</a>
                                        <table class="table table-bordered table-striped">
                                            <thead>
                                            <tr>
                                                <td>序号</td>
                                                <td>名称</td>
                                                <td>数据源地址</td>
                                                <td>已索引条数</td>
                                                <td>今日索引条数</td>
                                                <td>操作</td>
                                            </tr>
                                            </thead>
                                            <tbody data-bind="foreach: paginationUrls">
                                            <tr>
                                                <td data-bind="text: ($index()+1)"></td>
                                                <td data-bind="text: name"></td>
                                                <td data-bind="text: url" style="width: 400px;word-break: break-all"></td>
                                                <td data-bind="text: indexCounts"></td>
                                                <td data-bind="text: todayIndexCounts"></td>
                                                <td>
                                                    <a role="button" class="btn btn-primary">刷新</a>
                                                </td>
                                            </tr>
                                            </tbody>
                                            <tfoot>
                                            <tr>
                                                <td colspan="6">
                                                    <div id="crawl_data_pagination"></div>
                                                </td>
                                            </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>