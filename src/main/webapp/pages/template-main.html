<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css"/>
    <script src="../js/jQuery.js" type="text/javascript"></script>
    <script src="../js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../js/knockout.js" type="text/javascript"></script>
    <script src="../js/template-main.js" type="text/javascript"></script>
    <title>配置模板</title>
</head>
<body>

<!--常用信息的帮助页面-->
<div class="modal fade bs-example-modal-lg" id="modal-contentHelp" tabindex="-1" role="dialog"
     aria-labelledby="modalContentHelpTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title" id="modalContentHelpTitle">常用正则表达式</h4>
            </div>
            <div class="modal-body" id="modal-contentHelp-body">
                <!--时间过滤器帮助-->
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-primary">
                            <div class="panel-heading"><mark>时间过滤器</mark>常用表达式</div>
                            <div class="panel-body">
                                <dl class="dl-horizontal">
                                    <dt>年月日时分秒</dt>
                                    <dd>(20\d{2}[-|/|年](?:0[1-9]|1[012])[-|/|月](?:0[1-9]|[12][0-9]|3[01])日?\s+\d{1,2}:\d{1,2}:\d{1,2})</dd>
                                    <dt>年月日时分</dt>
                                    <dd>(20\d{2}[-|/|年](?:0[1-9]|1[012])[-|/|月](?:0[1-9]|[12][0-9]|3[01])日?\s+\d{1,2}:\d{1,2})</dd>
                                    <dt> 年月日</dt>
                                    <dd>(20\d{2}[-|/|年](?:0[1-9]|1[012])[-|/|月](?:0[1-9]|[12][0-9]|3[01])日?)</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                <!--时间格式化器帮助-->
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-primary">
                            <div class="panel-heading"><mark>时间格式化器</mark>常用表达式</div>
                            <div class="panel-body">
                                <dl class="dl-horizontal">
                                    <dt>年-月-日</dt>
                                    <dd>yyyy-MM-dd</dd>
                                    <dt>年-月-日 时:分</dt>
                                    <dd>yyyy-MM-dd HH:mm</dd>
                                    <dt>年-月-日 时:分:秒</dt>
                                    <dd>yyyy-MM-dd HH:mm:ss</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
                <!--列表分页过滤器-->
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-primary">
                            <div class="panel-heading"><mark>列表分页过滤器</mark>常用表达式</div>
                            <div class="panel-body">
                                <dl class="dl-horizontal">
                                    <dt>分页末尾页数</dt>
                                    <dd>\d+</dd>
                                    <dd>/(\d+)页</dd>
                                    <dd>共(\d+)页</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!--显示html内容-->
<div class="modal fade bs-example-modal-lg" id="modal-viewHtml" tabindex="-1" role="dialog"
     aria-labelledby="modalHtmlTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title" id="modalHtmlTitle">html内容</h4>
            </div>
            <div class="modal-body" id="modal-viewHtml-body">
                <div class="text-center">
                    <img src="../image/load.gif">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!--显示错误信息-->
<div class="modal fade bs-example-modal-lg" id="modal_showErrorMessage" tabindex="-1" role="dialog" aria-labelledby="modal_showErrorTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title" id="modal_showErrorTitle">错误信息</h4>
            </div>
            <div class="modal-body">
                <div id="modal_body_showError"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">确定</button>
            </div>
        </div>
    </div>
</div>

<div class="container">

    <!--标题-->
    <div class="row">
        <div class="col-md-12">
            <h1 class="text-center" id="title_config"></h1>
        </div>
    </div>

    <!--基本属性-->
    <div class="row" data-bind="with: basicInfoViewModel">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">基本信息</h3>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="txt_url">模板Url</label>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" class="form-control" data-bind="value: url" id="txt_url" placeholder="页面url">
                                    </div>
                                    <div class="col-md-6">
                                        <button type="button" data-bind="click: viewHtmlContent" class="btn btn-primary">查看</button>
                                        &nbsp;&nbsp;&nbsp;&nbsp;<a href="http://try.jsoup.org/">jsoup验证</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.regexworld.com/">java正则验证</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-12">
                                        <label for="txt_webName">名称</label>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" data-bind="value: name" class="form-control" id="txt_webName" placeholder="页面描述">
                                    </div>
                                    <div class="col-md-6">
                                        &nbsp;&nbsp;&nbsp;&nbsp;<a href="../index.html">返回列表页</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--tab菜单-->
    <div class="row">
        <div class="col-md-12">
            <div role="tabpanel">
                <!-- Nav tabs --> <!--nav nav-tabs nav-stacked-->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#list_tab" aria-controls="list_tab"
                                                              role="tab"
                                                              data-toggle="tab">列表页属性配置</a></li>
                    <li role="presentation"><a href="#news_tab" aria-controls="news_tab" role="tab"
                                               data-toggle="tab">内容页属性配置</a>
                    </li>
                    <li role="presentation"><a href="#schedule_tab" aria-controls="schedule_tab" role="tab"
                                               data-toggle="tab">爬取调度配置</a>
                    </li>
                    <li role="presentation"><a href="#templateTag_tab" aria-controls="templateTag_tab" role="tab"
                                               data-toggle="tab">模板静态属性配置(Tags)</a>
                    </li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="list_tab"></div>
                    <div role="tabpanel" class="tab-pane" id="news_tab"></div>
                    <div role="tabpanel" class="tab-pane" id="schedule_tab"></div>
                    <div role="tabpanel" class="tab-pane" id="templateTag_tab">
                        <div class="row addRowTopMargin" data-bind="with: templateTagsViewModel">
                            <div class="col-md-12">
                                <!--静态属性的Key和Value对-->
                                <div class="row" data-bind="foreach: tags">
                                    <div class="col-md-12">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <button type="button" data-bind="click: $parent.removeTag" class="close"><span
                                                        aria-hidden="true">&times;</span><span class="sr-only">Close</span>
                                                </button>
                                                静态属性
                                            </div>
                                            <div class="panel-body">
                                                <!--静态属性-->
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>键Key</label>
                                                            <input type="text" data-bind="value: tagKey" class="form-control" placeholder="静态属性key">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <label>值Value</label>
                                                            <input type="text" data-bind="value: tagValue" class="form-control" placeholder="静态属性value">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <button class="btn btn-default" data-bind="click: addTag">添加静态属性</button>
                                        <hr/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <!--内容页和列表页主体-->
            <div class="row">
                <!--<div class="col-md-4">-->
                    <!--列表-->
                    <!--<div id="list_tab"></div>-->
                <!--</div>-->
                <!--<div class="col-md-4">-->
                    <!--新闻-->
                    <!--<div id="news_tab"></div>-->

                <!--</div>-->
                <!--<div class="col-md-4">-->
                    <!--调用任务-->
                    <!--<div id="schedule_tab"></div>-->
                <!--</div>-->

                <!--验证结果-->
                <div class="col-md-12">
                    <div class="form-group">
                        <label id="lbl_result_title">验证及测试结果</label>
                        &nbsp;&nbsp;&nbsp;&nbsp;<a href="../index.html">返回列表页</a> &nbsp;&nbsp;&nbsp;&nbsp;
                        <button  id="btn_showErrorMessage" data-target="#modal_showErrorMessage" data-toggle="modal" class="btn btn-warning btn-xs" style="display: none">错误信息格式化显示</button >
                        <textarea id="txt_testResult" class="form-control" rows="15"></textarea>
                    </div>
                </div>

                <!--保存测试按钮-->
                <div class="col-md-12">
                    <div class="row text-right">
                        <div class="col-md-12">
                            <button type="button" data-bind="click: saveToLocalFile" class="btn btn-primary">保存到文件</button>
                            <button type="button" data-bind="click: templateTest" class="btn btn-primary">查看模板JSON</button>
                            <button type="button" data-bind="click: saveIncreaseTemplate" class="btn btn-primary">保存为增量模板</button>
                            <button type="button" data-bind="click: saveTemplate" class="btn btn-primary">保存模板</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>
</body>
</html>